# Internationalization (i18n) Support

MyBatis Boost extension supports multiple languages through VS Code's built-in l10n (localization) system.

## Supported Languages

- **English** (default) - `en`
- **Simplified Chinese** - `zh-cn`

## How It Works

The extension uses two types of translation files:

### 1. Package Strings (`package.nls.json`)

These files translate strings in `package.json`:
- Command titles
- Configuration descriptions
- Extension display name and description

**Location:**
- `package.nls.json` - English (default)
- `package.nls.zh-cn.json` - Simplified Chinese

**Usage in package.json:**
```json
{
  "displayName": "%displayName%",
  "description": "%description%"
}
```

### 2. Runtime Strings (`l10n/bundle.l10n.json`)

These files translate strings shown during extension execution:
- Notification messages
- Warning and error messages
- Progress indicators
- Console output

**Location:**
- `l10n/bundle.l10n.json` - English (default)
- `l10n/bundle.l10n.zh-cn.json` - Simplified Chinese

**Usage in code:**
```typescript
vscode.window.showInformationMessage(
    vscode.l10n.t('command.cacheCleared')
);
```

## Language Selection

VS Code automatically selects the language based on your system settings or VS Code display language:

1. Open VS Code settings
2. Search for "Display Language"
3. Select your preferred language
4. Restart VS Code

The extension will automatically use the corresponding translation if available, otherwise it falls back to English.

## Adding a New Language

To add support for a new language (e.g., French):

### 1. Create Package Translation File

Create `package.nls.fr.json`:
```json
{
  "displayName": "MyBatis Boost",
  "description": "Navigation bidirectionnelle haute performance entre les interfaces mapper MyBatis et les fichiers XML",
  "command.clearCache": "Effacer le cache et reconstruire",
  ...
}
```

### 2. Create Runtime Translation File

Create `l10n/bundle.l10n.fr.json`:
```json
{
  "extension.activating": "Activation de l'extension...",
  "command.cacheCleared": "Cache MyBatis Boost effac√© et reconstruit",
  ...
}
```

### 3. Test

1. Change VS Code display language to French
2. Restart VS Code
3. Verify that the extension uses French translations

## Translation Keys

### Package Strings

| Key | Description |
|-----|-------------|
| `displayName` | Extension name shown in marketplace |
| `description` | Extension description |
| `command.clearCache` | Clear cache command title |
| `command.refreshMappings` | Refresh mappings command title |
| `command.jumpToXml` | Jump to XML command title |
| `config.title` | Configuration section title |
| `config.cacheSize.description` | Cache size setting description |
| `config.customXmlDirectories.description` | Custom XML directories setting description |
| `config.javaParseLines.description` | Java parse lines setting description |
| `config.showBindingIcons.description` | Show binding icons setting description |
| `config.useDefinitionProvider.description` | Use definition provider setting description |

### Runtime Strings

| Key | Description |
|-----|-------------|
| `extension.activating` | Extension activation log |
| `extension.activated` | Extension activated log (with time) |
| `command.notActive` | Extension not active warning |
| `command.cacheCleared` | Cache cleared success message |
| `command.mappingsRefreshed` | Mappings refreshed success message |
| `command.noActiveEditor` | No active editor warning |
| `command.noXmlFound` | No XML file found warning |
| `command.statementNotFound` | Statement not found warning (with parameter) |
| `mode.definitionProvider` | DefinitionProvider mode name |
| `mode.codeLens` | CodeLens mode name |

## Best Practices

1. **Keep Keys Descriptive**: Use dot notation to organize keys (e.g., `extension.`, `command.`, `mode.`)

2. **Use Parameters for Dynamic Content**:
   ```typescript
   vscode.l10n.t('command.statementNotFound', methodName)
   ```

3. **Maintain Consistency**: Ensure all translation files have the same keys

4. **Test All Languages**: Verify translations in each supported language

5. **Update Documentation**: When adding new translation keys, update this document

## Technical Details

- **VS Code l10n API**: Uses `vscode.l10n.t()` for runtime translations
- **Automatic Language Detection**: VS Code automatically selects the best matching language
- **Fallback Behavior**: If a key is missing in a translation file, English is used
- **No Restart Required**: Runtime string changes take effect after reloading the window
- **Package Strings**: Require extension reload to see changes

## References

- [VS Code Extension Localization Guide](https://code.visualstudio.com/api/references/extension-manifest#localization)
- [VS Code l10n API](https://code.visualstudio.com/api/references/vscode-api#l10n)
